<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ja">
<head>
    <meta charset="UTF-8">
    <title>カート一覧</title>
</head>
<body>
<h2 style="text-align:center;">カート一覧</h2>

<!-- カート更新フォーム -->
<form th:action="@{/cart/update}" method="post">
    <div style="text-align:center;">
        <table border="1" style="margin:0 auto;" id="cart-table">
            <tr>
                <th>商品名</th>
                <th>税別価格</th>
                <th>数量</th>
                <th>操作</th>
            </tr>
            <tr th:each="item, iterStat : ${cartItems}">
                <td th:text="${item.productName}">商品名</td>
                <td th:text="${item.price}">1000</td>
                <td>
                    <select th:name="'quantities[' + ${iterStat.index} + ']'">
                        <option th:each="i : ${#numbers.sequence(1,10)}"
                                th:value="${i}"
                                th:text="${i}"
                                th:selected="${i == item.quantity}">1
                        </option>
                    </select>
                </td>
                <td>
                    <!-- 削除ボタン -->
                    <button type="submit" th:name="'removeProductId'" th:value="${item.productId}">削除</button>
                </td>
            </tr>

            <!-- 全削除ボタン -->
            <tr>
                <td colspan="3" style="text-align:right; font-weight:bold;"></td>
                <td>
                    <button type="submit" name="clearCart" value="true">全削除</button>
                </td>
            </tr>
        </table>
    </div>

   <!-- 表の下に合計金額欄を表示 -->
	<div style="width:300px; padding:5px; margin:50px 0 0 760px; text-align:left;">
    	<p>税別合計: <span th:text="${totalExclTax}">0</span> 円</p>
    	<p>消費税合計: <span th:text="${totalTax}">0</span> 円</p>
    	<p>税込合計: <span th:text="${totalInclTax}">0</span> 円</p>
	</div>
</form>

<br><br>

<!-- 注文ボタンと買い物を続けるリンクを中央に配置 -->
<div style="text-align:center; margin-top:20px;">
    <!-- 注文ボタン -->
    <form th:action="@{/order/checkout}" method="get">
        <button type="submit" style="padding:12px 24px; font-size:18px;">注文する</button>
    </form>

    <br>

    <!-- 買い物を続けるリンク -->
    <a href="/">買い物を続ける</a>
</div>

</body>
</html>
